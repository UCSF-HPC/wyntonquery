---
title: "Jobs on the SGE queue"
author: Henrik Bengtsson
date: 2021-06-16
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Jobs on the SGE queue}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Introduction


## Jobs currently on the SGE queue

```r
qstat <- read_qstat()
qstat
# A tibble: 70,952 x 20
   job_ID prior ntckts name  user  project department state cpu      mem      io
    <dbl> <dbl>  <dbl> <chr> <chr> <chr>   <chr>      <chr> <chr>  <dbl>   <dbl>
 1 259721 0.303  0.281 reli… user… projec… departmen… dr    2:07… 2.97e5 6.43e+2
 2 188295 0.326  0.306 reli… user… projec… departmen… dr    2:11… 8.97e5 3.79e+3
 3 194922 0.303  0.281 reli… user… projec… departmen… dr    1:12… 2.72e5 1.43e+3
 4 272071 0.303  0.281 reli… user… projec… departmen… r     0:04… 1.13e5 5.41e+2
 5 224427 0.165  0.128 tk1c… user… projec… departmen… r     0:10… 2.15e4 5.54e-2
 6 224772 0.165  0.128 tk1c… user… projec… departmen… r     0:10… 2.67e4 5.53e-2
 7 229592 0.165  0.128 tk1c… user… projec… departmen… r     0:01… 8.39e3 2.27e-2
 8 224340 0.165  0.128 tk1c… user… projec… departmen… r     0:10… 3.33e4 5.49e-2
 9 224686 0.165  0.128 tk1c… user… projec… departmen… r     0:10… 4.80e4 5.48e-2
10 224254 0.165  0.128 tk1c… user… projec… departmen… r     0:10… 3.69e4 5.48e-2
# … with 70,942 more rows, and 9 more variables: tckts <dbl>, ovrts <dbl>,
#   otckt <dbl>, ftckt <dbl>, stckt <dbl>, share <dbl>, queue <chr>,
#   slots <dbl>, ja_task_ID <dbl>
```


```r
nusers <- length(unique(qstat$user))
nprojects <- length(unique(qstat$project))
cat(sprintf("Number of jobs including job-array tasks: %d\n", nrow(qstat)))
cat(sprintf("Number of unique users: %d\n", nusers))
cat(sprintf("Number of unique projects: %d\n", nprojects))
# Number of jobs: 70952
# Number of unique users: 78
# Number of unique projects: 40
```

```r
table(qstat$state)
#
#   dr    dt   Eqw   hqw    qw     r    Rr     t 
#   51    43    11   524 62896  7416     2     9
```

